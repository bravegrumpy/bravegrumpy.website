version: 1
frontend: 
  phases:
    preBuild: 
      commands:
        - rm -rf node_modules
        - nvm install 20
        - nvm use  20
        - npm ci
    build:
      commands: 
        - npm run build
        - mkdir -p .amplify-hosting
        - echo '{"files":{"index.html":{"type":"file"}}}' > .amplify-hosting/deploy-manifest.json
        - ls -la dist
  artifacts:
    baseDirectory: ./dist
    files:
      - '**/*'