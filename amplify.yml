version: 1
backend:
  phases:
    preBuild:
      commands:
        - 'echo "installing dependancies..."'
        - 'npm install --omit=dev --cache .npm --prefer-offline'
    build:
      commands:
        - 'echo "building project..."'
        - 'npm run build'
    postBuild:
      - 'echo "starting backend server on port 3000'
      - 'npm run start'
  artifacts:
    baseDirectory: /
    files:
      - '**/*'
  cache:
    paths:
      - 'node_modules/**/*'
      - '.npm/**/*'
frontend:
  phases:
    # IMPORTANT - Please verify your build commands
    postBuild:
      commands:
        - 'echo "starting front-end"'
        - 'npm run preview'

  artifacts:
    # IMPORTANT - Please verify your build output directory
    baseDirectory: build
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
      - '.npm/**/*'