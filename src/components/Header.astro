---
import Logo from './Logo.svelte';
import ThemeSwitch from './ThemeSwitch.astro';
import Navigation from './Navigation.astro';
import PageTitle from './PageTitle.svelte';
import '@styles/declarations.less';

import { Image } from 'astro:assets';

import { navigation, colors } from '@/scripts/data.js';

navigation.routes.forEach((route) => (
    route.className = Astro.url.pathname === route.href ? "active" : "default",
    route.palette = {
        defaultBackgroundColor: colors.bravegrumpy.brand1,
        defaultColor: colors.bravegrumpy.accent1a,
        defaultActiveColor: colors.bravegrumpy.highlight1,
        darkBackgroundColor: colors.bravegrumpy.accent1a,
        darkDefaultColor: colors.bravegrumpy.logoPurple,
        darkActiveColor: colors.bravegrumpy.brand1
    }
));


navigation["width"] = '100%';
navigation["backgroundColor"] = colors.bravegrumpy.logoPurple;
navigation["darkBackgroundColor"] = colors.bravegrumpy.accent2a;
navigation["justifyContent"] = "flex-start";

const { pageTitle, pageSubtitle } = Astro.props;
---
<header class="header">
    <div class="logo">
        <Logo size={"105rem"}>
            <Image
                src="/favicon.png"
                alt="BravegrumpyLogo"
                slot="image"
                width=105
                height=105 
                style="border-radius: 5px"
            />
            <ThemeSwitch slot="switch" />
        </Logo>
    </div>
    <Navigation props={navigation} />
    <PageTitle pageTitle={pageTitle} pageSubtitle={pageSubtitle}/>
</header>


<style lang="less">
    @import "../styles/declarations.less";
    
    :global(.dark) {
        .header {
            background-color: @logoPurple;
            .logo {
                background-color: @logoPurple;
            }
        }
    }

    .header {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: space-between;
        gap: 1rem;
        width: 100%;
        background-color: @accent1a;
        
        .logo {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-items: space-between;
            width: 100%;
            gap: 10rem;
            background-color: @accent1a;
        }
    }
</style>