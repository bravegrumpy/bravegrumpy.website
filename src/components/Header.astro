---
import Logo from './Logo.svelte';
import ThemeSwitch from './ThemeSwitch.astro';
import Navigation from './Navigation.astro';


const pages = await Astro.glob('../pages/*.astro');



function active(href) {
    return new URL(Astro.request.url).pathname === href ? "active" : "default";
}

const nav = {
    routes: [
        {
            href: "/",
            className: active("/"),
            text: 'home'
        },
        {
            href: "/about",
            className: active("/about"),
            text: 'about'
        },
        {
            href: "/blog",
            className: active("/blog"),
            text: 'blog'
        },
        {
            href: "/headers",
            className: active("/headers"),
            text: 'headers'
        },
        {
            href: "/components",
            className: active("/components"),
            text: 'components'
        },
    ]
}

---
<header>
    <div class="logo">
        <Logo client:load size="105rem">
            <ThemeSwitch slot="switch" />
        </Logo>
    </div>
    <Navigation props={nav}/>
</header>

<div>
    <h3>{new URL(await Astro.request.url).href.split('/').slice(-1)}</h3>
    <ul>
        {
            pages.map((page) => <li>{page.url}</li>)
        }
    </ul>
</div>

<style lang="less">
    @import "../styles/declarations.less";
    
    :global(.dark) {
        header {
            .logo {
                background-color: @logoPurple;
            }
        }
    }

    header {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: space-between;
        gap: 0px;
        width: 100%;
        
        .logo {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-items: space-between;
            width: 100%;
            gap: 10rem;
            background-color: @accent1a;
        }
    }
</style>